<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DNA and Genomics</title>
    <style>
        :root { --bg: #ffffff; --dna: #2d3436; --lag: #0984e3; --gap: #d63031; --gene: #00b894; }
        * { -webkit-tap-highlight-color: transparent; outline: none; }
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            overflow: hidden; background: var(--bg);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            user-select: none; -webkit-user-select: none;
        }
        #stage { width: 100vw; height: 100vh; display: block; cursor: crosshair; }
        #ui-layer { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            pointer-events: none; display: flex; flex-direction: column; justify-content: space-between;
            padding: 40px 20px; box-sizing: border-box;
        }
        .header { text-align: center; }
        .footer { text-align: center; }
        h1 { font-size: 14px; font-weight: 400; letter-spacing: 2px; color: #aaa; text-transform: uppercase; margin: 0; }
        .counter { font-size: 48px; font-weight: 200; color: var(--dna); margin: 10px 0; }
        .hint { font-size: 12px; color: #ccc; font-style: italic; }
        /* Security Overlay */
        #prot { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999; pointer-events: none; }
    </style>
</head>
<body oncontextmenu="return false;" onkeydown="return false;">
    <canvas id="stage"></canvas>
    <div id="ui-layer">
        <div class="header">
            <h1>Telomere Integrity</h1>
            <div id="gen" class="counter">50</div>
            <div id="status" style="font-size: 10px; color: #666;">REPLICATIVE POTENTIAL (BP)</div>
        </div>
        <div class="footer">
            <div class="hint">Tap to trigger mitosis</div>
        </div>
    </div>
    <div id="prot"></div>

    <script>
        /**
         * SECURITY FEATURES
         * 1. Disable Right Click
         * 2. Disable Common Inspect Keys
         * 3. Canvas Rendering (Code doesn't exist as DOM elements)
         */
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 's' || e.key === 'i' || e.key === 'j' || e.key === 'c')) {
                e.preventDefault(); return false;
            }
        });

        const canvas = document.getElementById('stage');
        const ctx = canvas.getContext('2d');
        const genEl = document.getElementById('gen');
        const statusEl = document.getElementById('status');

        let dpr = window.devicePixelRatio || 1;
        let w, h;
        let tLen = 0.85; // Initial Telomere Length %
        let geneEdge = 0.3; // Genes start at 30% width
        let targetLen = 0.85;
        let bpRemaining = 50;

        function resize() {
            w = window.innerWidth;
            h = window.innerHeight;
            canvas.width = w * dpr;
            canvas.height = h * dpr;
            ctx.scale(dpr, dpr);
        }

        window.addEventListener('resize', resize);
        resize();

        function draw() {
            // Smooth Interpolation
            tLen += (targetLen - tLen) * 0.1;

            ctx.clearRect(0, 0, w, h);

            const centerY = h * 0.5;
            const dnaSpacing = 10;
            const xStart = 0;
            const xEnd = w * tLen;
            const geneX = w * geneEdge;

            // 1. Draw Gene Region (The Danger Zone)
            ctx.fillStyle = 'rgba(0, 184, 148, 0.05)';
            ctx.fillRect(0, 0, geneX, h);
            
            ctx.beginPath();
            ctx.setLineDash([5, 5]);
            ctx.strokeStyle = '#00b894';
            ctx.lineWidth = 1;
            ctx.moveTo(geneX, 0);
            ctx.lineTo(geneX, h);
            ctx.stroke();
            ctx.setLineDash([]);

            ctx.save();
            ctx.translate(geneX - 15, h * 0.8);
            ctx.rotate(-Math.PI/2);
            ctx.fillStyle = '#00b894';
            ctx.font = '10px sans-serif';
            ctx.fillText("CRITICAL GENE LOCI", 0, 0);
            ctx.restore();

            // 2. Draw 5' to 3' Leading Strand (Top)
            ctx.beginPath();
            ctx.strokeStyle = '#2d3436';
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.moveTo(xStart, centerY - dnaSpacing);
            ctx.lineTo(xEnd, centerY - dnaSpacing);
            ctx.stroke();

            // 3. Draw 3' to 5' Lagging Strand (Bottom)
            // Scientifically: Shorter due to RNA Primer removal at the end
            const laggingEnd = xEnd - (w * 0.04);
            ctx.beginPath();
            ctx.strokeStyle = '#0984e3';
            ctx.moveTo(xStart, centerY + dnaSpacing);
            ctx.lineTo(laggingEnd, centerY + dnaSpacing);
            ctx.stroke();

            // 4. Draw The Gap (Visualizing the Problem)
            ctx.beginPath();
            ctx.strokeStyle = '#d63031';
            ctx.setLineDash([2, 4]);
            ctx.moveTo(laggingEnd, centerY + dnaSpacing);
            ctx.lineTo(xEnd, centerY + dnaSpacing);
            ctx.stroke();
            ctx.setLineDash([]);

            // Labels
            ctx.font = '9px sans-serif';
            ctx.fillStyle = '#aaa';
            ctx.fillText("5' END", xStart + 10, centerY - 25);
            ctx.fillText("3' TELOMERE TIP", xEnd - 80, centerY - 25);
            
            ctx.fillStyle = '#d63031';
            ctx.fillText("REPLICATION GAP", laggingEnd, centerY + 25);

            requestAnimationFrame(draw);
        }

        function mitosis() {
            if (bpRemaining > 0) {
                bpRemaining -= 2;
                targetLen -= 0.022;
                genEl.innerText = Math.max(0, bpRemaining);
                
                if (bpRemaining <= 10) {
                    genEl.style.color = '#d63031';
                    statusEl.innerText = "CRITICAL LENGTH / SENESCENCE NEAR";
                }
            } else {
                statusEl.innerText = "GENETIC INSTABILITY DETECTED";
                // Add a small shake effect
                canvas.style.transform = `translate(${Math.random()*4-2}px, ${Math.random()*4-2}px)`;
            }
        }

        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            mitosis();
        });
        canvas.addEventListener('mousedown', mitosis);

        draw();
    </script>
</body>
</html>
