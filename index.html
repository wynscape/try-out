<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Endocytosis Interactive</title>
    <style>
        :root { --primary: #333; --accent: #007AFF; }
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background: #fff; color: var(--primary); overflow: hidden; user-select: none; -webkit-user-select: none; }
        #app { display: flex; flex-direction: column; height: 100vh; align-items: center; justify-content: space-between; padding: 20px; box-sizing: border-box; }
        header { text-align: center; }
        h1 { font-weight: 300; font-size: 1.5rem; margin-bottom: 5px; letter-spacing: -0.5px; }
        .controls { width: 100%; max-width: 400px; background: #f8f8f8; padding: 20px; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); margin-bottom: 20px; }
        input[type=range] { width: 100%; cursor: pointer; accent-color: var(--accent); }
        .label-group { display: flex; justify-content: space-between; font-size: 0.8rem; margin-top: 10px; color: #666; }
        canvas { flex-grow: 1; width: 100%; max-width: 500px; touch-action: none; }
    </style>
</head>
<body oncontextmenu="return false;">

<div id="app">
    <header>
        <h1>Endocytosis</h1>
        <p style="font-size: 0.9rem; color: #888;">Fluid Membrane Dynamics</p>
    </header>

    <canvas id="membraneCanvas"></canvas>

    <div class="controls">
        <input type="range" id="progressSlider" min="0" max="100" value="0">
        <div class="label-group">
            <span>Extracellular</span>
            <span>Invagination</span>
            <span>Vesicle</span>
        </div>
    </div>
</div>

<script>
/**
 * SECURITY ENFORCEMENT
 */
(function() {
    document.addEventListener('keydown', e => {
        if (e.ctrlKey && (e.key === 'u' || e.key === 's' || e.key === 'i' || e.key === 'j')) e.preventDefault();
    });
    // Basic anti-copying logic
    setInterval(() => { if(window.outerHeight - window.innerHeight > 200) { document.body.innerHTML = "Security Protection Enabled."; }}, 1000);
})();

/**
 * BIOLOGY SIMULATION
 */
const canvas = document.getElementById('membraneCanvas');
const ctx = canvas.getContext('2d');
const slider = document.getElementById('progressSlider');

let width, height, time = 0;
const numLipids = 60;
const lipids = [];

function resize() {
    width = canvas.width = canvas.clientWidth * window.devicePixelRatio;
    height = canvas.height = canvas.clientHeight * window.devicePixelRatio;
}
window.addEventListener('resize', resize);
resize();

function drawLipid(x, y, angle) {
    ctx.save();
    ctx.translate(x, y);
    ctx.rotate(angle);
    
    // Head
    ctx.beginPath();
    ctx.arc(0, 0, 5, 0, Math.PI * 2);
    ctx.fillStyle = '#444';
    ctx.fill();
    
    // Tails
    ctx.beginPath();
    ctx.moveTo(-2, 5); ctx.lineTo(-2, 15);
    ctx.moveTo(2, 5); ctx.lineTo(2, 15);
    ctx.strokeStyle = '#888';
    ctx.lineWidth = 1.5;
    ctx.stroke();
    ctx.restore();
}

function animate() {
    ctx.clearRect(0, 0, width, height);
    time += 0.05;
    const progress = slider.value / 100;
    
    const centerX = width / 2;
    const centerY = height / 3;
    const spacing = width / (numLipids / 2);

    // Target Molecule
    ctx.beginPath();
    ctx.arc(centerX, centerY + (progress * 150), 10, 0, Math.PI * 2);
    ctx.fillStyle = '#FF3B30';
    ctx.fill();

    for (let i = 0; i <= numLipids; i++) {
        let x = i * (width / numLipids);
        let wave = Math.sin(time + i * 0.3) * 3; // Fluid motion
        
        let targetY = centerY;
        let angle = 0;

        // Deformation Logic
        let dist = Math.abs(x - centerX);
        if (dist < 100) {
            let indent = Math.cos((dist / 100) * (Math.PI / 2)) * (progress * 180);
            targetY += indent;
            
            // Calculate angle based on curve gradient
            angle = (x - centerX) * progress * 0.01;
            
            // Pinching effect
            if (progress > 0.8) {
                let pinch = (progress - 0.8) * 5;
                if (x < centerX) x += pinch * 20;
                if (x > centerX) x -= pinch * 20;
            }
        }

        // Top Layer
        drawLipid(x, targetY + wave, angle);
        // Bottom Layer
        drawLipid(x, targetY + 25 + wave, angle);
    }

    requestAnimationFrame(animate);
}

animate();
</script>
</body>
</html>
